map "http://salute.gov.it/ig/cda-fhir-maps/StructureMap/TestObservationStR2b" = "TestObservationStR2b"

uses "http://hl7.org/cda/stds/core/StructureDefinition/Observation" alias CdaObservation as source
uses "http://hl7.org/fhir/StructureDefinition/Observation" alias FhirObservation as target

uses "http://hl7.org/cda/stds/core/StructureDefinition/ST-dot-r2b" alias ST_dot_r2b as source
uses "http://hl7.org/cda/stds/core/StructureDefinition/CS" alias CS as source
uses "http://hl7.org/cda/stds/core/StructureDefinition/IVL-TS" alias IVL_TS as source
uses "http://hl7.org/fhir/StructureDefinition/Period" alias Period as target

imports "http://salute.gov.it/ig/cda-fhir-maps/StructureMap/CdaToFhirDataTypes"
imports "http://salute.gov.it/ig/cda-fhir-maps/StructureMap/FULLHEADER"

group CdaToFHIR(source cda : CdaObservation, target obs : Observation) {
    cda -> obs.status ='final' "final";
    cda.value : ST_dot_r2b as value then {
        value.value as data -> obs.value = data "value";
    } "str2b";
}
